<!-- Single Buyer Detail View -->
<div *ngIf="!loading && selectedbuyer" class="container mt-5">
  <div class="card shadow-lg">
    <div class="row g-0">

      <!-- Image Side -->
      <div class="col-md-4 text-center p-4 bg-light rounded-start border-end">
        <div class="d-flex flex-column align-items-center">
          <div class="position-relative">
            <img [src]="selectedbuyer.profileImageUrl || 'https://via.placeholder.com/150'"
              class="img-fluid rounded-circle border border-3 shadow"
              style="width: 150px; height: 150px; object-fit: cover;"
              [alt]="selectedbuyer.companyName || 'Buyer Profile'">

            <!-- Optional Status Badge -->
            <span
              class="position-absolute top-0 start-100 translate-middle p-1 bg-success border border-light rounded-circle"
              title="Active Buyer">
              <span class="visually-hidden">Online</span>
            </span>
          </div>

          <h3 class="mt-3 fw-semibold text-dark">
            {{ selectedbuyer.companyName || 'Unknown Company' }}
          </h3>

          <p class="text-secondary small">
            {{ selectedbuyer.address || 'N/A' }}
          </p>
        </div>
      </div>

      <!-- Details Side -->
      <div class="col-md-8">
        <div class="card-body">
          <h4 class="card-title mb-4 text-primary fw-bold border-bottom pb-2">
            ğŸ§¾ Buyer Details
          </h4>

          <div class="row row-cols-1 row-cols-md-2 g-3">

            <div class="col">
              <div class="info-item">
                <strong>ğŸ“ Alternate Contact:</strong>
                <div>{{ selectedbuyer.alternateContact || 'N/A' }}</div>
              </div>
            </div>


            <div class="col">
              <div class="info-item d-flex align-items-center gap-3 p-3 bg-gradient border-0 rounded-3 shadow-sm h-100"
                style="background: linear-gradient(135deg, #f0f4ff, #ffffff); transition: transform 0.3s ease;">

                <div
                  class="icon-box d-flex align-items-center justify-content-center bg-primary text-white rounded-circle"
                  style="width: 40px; height: 40px;">
                  ğŸ¢
                </div>

                <div>
                  <div class="label text-uppercase text-secondary small fw-semibold letter-spacing">
                    Company Type
                  </div>
                  <div class="value fs-6 fw-bold text-dark">
                    {{ selectedbuyer.companyType || 'N/A' }}
                  </div>
                </div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ§¾ GST Number:</strong>
                <div>{{ selectedbuyer.gstNumber || 'N/A' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ§¾ PAN Number:</strong>
                <div>{{ selectedbuyer.panNumber || 'N/A' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸŒ¾ Preferred Crops:</strong>
                <div>{{ selectedbuyer.preferredCrops || 'N/A' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ’° Budget Range (â‚¹):</strong>
                <div>â‚¹{{ selectedbuyer.budgetRange || '0' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ” Purchase Frequency:</strong>
                <div>{{ selectedbuyer.purchaseFrequency || 'N/A' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ’³ Payment Method:</strong>
                <div>{{ selectedbuyer.preferredPaymentMethod || 'N/A' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ“… Last Purchase:</strong>
                <div>{{ selectedbuyer.lastPurchaseDate | date:'mediumDate' }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ“¦ Total Orders:</strong>
                <div>{{ selectedbuyer.totalOrders || 0 }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ’¸ Total Spent (â‚¹):</strong>
                <div>â‚¹{{ selectedbuyer.totalSpent || 0 }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>ğŸ Loyalty Points:</strong>
                <div>{{ selectedbuyer.loyaltyPoints || 0 }}</div>
              </div>
            </div>

            <div class="col">
              <div class="info-item">
                <strong>â­ Buyer Rating:</strong>
                <div>{{ selectedbuyer.buyerRating || 'N/A' }}</div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex justify-content-end gap-3 mt-4">
            <button class="btn btn-success shadow-sm px-4" (click)="contactBuyer(selectedbuyer)">
              ğŸ“ Contact Buyer
            </button>
            <button class="btn btn-outline-primary shadow-sm px-4" (click)="goBackToList()">
              â¬…ï¸ Back to All Buyers
            </button>
          </div>
        </div>
      </div>


    </div>
  </div>
</div>