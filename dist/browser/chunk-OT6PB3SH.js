import{a as A}from"./chunk-MTL72WDJ.js";import{C as x,Ca as P,Da as O,Fa as D,G as r,Ga as M,I as f,J as C,N as u,Q as s,Qa as T,S as n,Sa as N,T as t,U as y,X as v,Y as g,Z as m,ca as E,da as i,ea as _,fa as l,ha as B,m as h,ma as I,ra as S,ta as w,ua as k,v as p,w as b}from"./chunk-HE3ANNAD.js";var U=()=>[1,2,3];function V(a,o){if(a&1){let e=v();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),y(4,"img",10),n(5,"h3",11),i(6),t(),n(7,"p",12),i(8),t()(),n(9,"div",13)(10,"div",14)(11,"h4",15),i(12,"Buyer Details"),t(),n(13,"div",16)(14,"div",17)(15,"strong"),i(16,"Alternate Contact:"),t(),i(17),t(),n(18,"div",17)(19,"strong"),i(20,"Company Type:"),t(),i(21),t(),n(22,"div",17)(23,"strong"),i(24,"GST Number:"),t(),i(25),t(),n(26,"div",17)(27,"strong"),i(28,"PAN Number:"),t(),i(29),t(),n(30,"div",17)(31,"strong"),i(32,"Preferred Crops:"),t(),i(33),t(),n(34,"div",17)(35,"strong"),i(36,"Budget Range (\u20B9):"),t(),i(37),t(),n(38,"div",17)(39,"strong"),i(40,"Purchase Frequency:"),t(),i(41),t(),n(42,"div",17)(43,"strong"),i(44,"Preferred Payment Method:"),t(),i(45),t(),n(46,"div",17)(47,"strong"),i(48,"Last Purchase Date:"),t(),i(49),S(50,"date"),t(),n(51,"div",17)(52,"strong"),i(53,"Total Orders:"),t(),i(54),t(),n(55,"div",17)(56,"strong"),i(57,"Total Spent (\u20B9):"),t(),i(58),t(),n(59,"div",17)(60,"strong"),i(61,"Loyalty Points:"),t(),i(62),t(),n(63,"div",17)(64,"strong"),i(65,"Buyer Rating:"),t(),i(66),t()(),n(67,"div",18)(68,"button",19),g("click",function(){p(e);let c=m();return b(c.contactBuyer(c.selectedbuyer))}),i(69,"\u{1F4DE} Contact Buyer"),t(),n(70,"button",20),g("click",function(){p(e);let c=m();return b(c.goBackToList())}),i(71,"\u2B05\uFE0F Back to All Buyers"),t()()()()()()()}if(a&2){let e=m();r(4),s("src",e.selectedbuyer.profileImageUrl||"https://via.placeholder.com/150",x)("alt",e.selectedbuyer.companyName),r(2),_(e.selectedbuyer.companyName),r(2),_(e.selectedbuyer.address),r(9),l(" ",e.selectedbuyer.alternateContact," "),r(4),l(" ",e.selectedbuyer.companyType," "),r(4),l(" ",e.selectedbuyer.gstNumber," "),r(4),l(" ",e.selectedbuyer.panNumber," "),r(4),l(" ",e.selectedbuyer.preferredCrops," "),r(4),l(" \u20B9",e.selectedbuyer.budgetRange," "),r(4),l(" ",e.selectedbuyer.purchaseFrequency," "),r(4),l(" ",e.selectedbuyer.preferredPaymentMethod," "),r(4),l(" ",w(50,17,e.selectedbuyer.lastPurchaseDate,"mediumDate")," "),r(5),l(" ",e.selectedbuyer.totalOrders," "),r(4),l(" \u20B9",e.selectedbuyer.totalSpent," "),r(4),l(" ",e.selectedbuyer.loyaltyPoints," "),r(4),l(" ",e.selectedbuyer.buyerRating," ")}}function L(a,o){a&1&&(n(0,"div",23)(1,"div",24),y(2,"div",25)(3,"div",26)(4,"div",27),t()())}function j(a,o){a&1&&(n(0,"div",21),u(1,L,5,0,"div",22),t()),a&2&&(r(),s("ngForOf",I(1,U)))}function z(a,o){if(a&1){let e=v();n(0,"div",21)(1,"div",23)(2,"div",30)(3,"div",31),y(4,"img",32),n(5,"div",33)(6,"h5",34),i(7),n(8,"span",35),i(9),t()(),n(10,"p",36),i(11," \u{1F4DE} "),n(12,"strong"),i(13,"Contact:"),t(),i(14),t(),n(15,"p",36),i(16," \u{1F4CD} "),n(17,"strong"),i(18,"Location:"),t(),i(19),t(),n(20,"p",37),i(21," \u{1F4E6} "),n(22,"strong"),i(23,"Total Orders:"),t(),i(24),t(),n(25,"button",38),g("click",function(){let c=p(e).$implicit,R=m(3);return b(R.contactBuyer(c))}),i(26,"Contact Buyer"),t(),n(27,"button",39),g("click",function(){p(e);let c=m(3);return b(c.goBackToList())}),i(28,"Back to List"),t()()()()()()}if(a&2){let e=o.$implicit;r(4),s("src",e.profileImageUrl||"assets/default-profile.png",x),r(3),l(" ",e.companyName||"Unknown Company"," "),r(2),l("Rating: ",e.buyerRating||"No Rating",""),r(5),l(" ",e.contactNumber||"N/A"," "),r(5),B(" ",e.city||"N/A",", ",e.state||"N/A",", ",e.country||"N/A"," "),r(5),l(" ",e.totalOrders||0," ")}}function G(a,o){if(a&1&&(n(0,"div"),u(1,z,29,8,"div",29),t()),a&2){let e=m(2);r(),s("ngForOf",e.buyers)}}function q(a,o){a&1&&(n(0,"p",3),i(1,"No buyers found."),t())}function $(a,o){if(a&1&&(n(0,"div"),u(1,G,2,1,"div",28)(2,q,2,0,"ng-template",null,0,k),t()),a&2){let e=E(3),d=m();r(),s("ngIf",((d.buyers==null?null:d.buyers.length)||0)>0)("ngIfElse",e)}}var F=class a{constructor(o,e,d){this.userserivice=o;this.router=e;this.route=d}buyers=[];loading=!0;selectedbuyer=null;ngOnInit(){this.checkAndLoadData()}checkAndLoadData(){this.route.params.subscribe(o=>{let e=o.buyerid;e?this.loadallbuyers(()=>{this.loadbuyerdetails(+e)}):this.loadallbuyers()})}loadbuyerdetails(o){this.loading=!0,this.userserivice.GetBuyerById(o).subscribe({next:e=>{if(this.loading=!1,e){let d=this.buyers.find(c=>c.buyerId===o);d&&d.profileImageUrl&&(e.profileImageUrl=d.profileImageUrl,console.log("\u2705 Profile image assigned from buyers array:",d.profileImageUrl))}this.selectedbuyer=e||null,this.buyers=[],console.log("Selected Buyer:",this.selectedbuyer)},error:e=>{this.loading=!1,this.selectedbuyer=null,console.error("\u274C Error loading product details:",e)}})}loadallbuyers(o){this.loading=!0,this.userserivice.GetAllBuyers().pipe(h(()=>{this.loading=!1})).subscribe({next:e=>{this.buyers=e,console.log("\u2705 All buyers loaded:",this.buyers),o&&o()},error:e=>{console.error("\u274C Error loading buyers:",e)}})}viewDetails(o){this.router.navigate(["buyer",o.buyerId])}goBackToList(){this.router.navigate(["/buyer"])}contactBuyer(o){console.log("\u{1F4DE} Contacting farmer for:",o)}static \u0275fac=function(e){return new(e||a)(f(A),f(N),f(T))};static \u0275cmp=C({type:a,selectors:[["app-buyer"]],decls:6,vars:3,consts:[["noBuyer",""],["class","container mt-5",4,"ngIf"],[1,"container","my-5"],[1,"text-center"],["class","row mb-4",4,"ngIf"],[4,"ngIf"],[1,"container","mt-5"],[1,"card","shadow-lg"],[1,"row","g-0"],[1,"col-md-4","text-center","p-4"],[1,"img-fluid","rounded-circle","border","border-3",3,"src","alt"],[1,"mt-3"],[1,"text-muted"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","mb-3"],[1,"row"],[1,"col-sm-6","mb-2"],[1,"d-flex","justify-content-end","gap-3","mt-4"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-outline-primary",3,"click"],[1,"row","mb-4"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"card","buyer-card","p-3","shadow-sm","shimmer-card"],[1,"shimmer-line","mb-2"],[1,"shimmer-line","w-75","mb-2"],[1,"shimmer-line","w-50"],[4,"ngIf","ngIfElse"],["class","row mb-4",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000",1,"card","buyer-card","p-3","shadow-sm"],[1,"card-body","d-flex","align-items-center"],["alt","Profile",1,"rounded-circle","me-4","buyer-profile",3,"src"],[1,"flex-grow-1"],[1,"card-title","mb-2"],[1,"badge"],[1,"card-text","mb-1"],[1,"card-text","mb-0"],[1,"btn","btn-custom","mt-3",3,"click"],[1,"btn","btn-secondary","mt-3",3,"click"]],template:function(e,d){e&1&&(u(0,V,72,20,"div",1),n(1,"main",2)(2,"h2",3),i(3,"\u{1F31F} Buyer Details \u{1F31F}"),t(),u(4,j,2,2,"div",4)(5,$,4,2,"div",5),t()),e&2&&(s("ngIf",!d.loading&&d.selectedbuyer),r(4),s("ngIf",d.loading),r(),s("ngIf",!d.loading))},dependencies:[M,P,O,D],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;border:2px solid #ddd}h2[_ngcontent-%COMP%]{font-weight:600}body[_ngcontent-%COMP%]{padding-top:80px;background:linear-gradient(135deg,#e0f7fa,#f8bbd0);min-height:100vh;font-family:Poppins,sans-serif}.navbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1050}.buyer-card[_ngcontent-%COMP%]{background:#ffffff40;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.18);border-radius:1.5rem;box-shadow:0 8px 32px #1f26875e;transition:all .4s ease}.buyer-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 40px #1f268780}.buyer-profile[_ngcontent-%COMP%]{width:90px;height:90px;object-fit:cover;border:3px solid #ffffff;box-shadow:0 0 10px #0003}.btn-custom[_ngcontent-%COMP%]{background:#6a11cb;background:linear-gradient(to right,#2575fc,#6a11cb);color:#fff;border-radius:30px;font-weight:700;transition:.3s}.btn-custom[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#6a11cb,#2575fc);transform:scale(1.05)}h2[_ngcontent-%COMP%]{font-weight:700;color:#333;margin-bottom:2rem}.badge[_ngcontent-%COMP%]{background:#6a11cb;background:linear-gradient(to right,#2575fc,#6a11cb);font-size:.75rem;padding:5px 10px;border-radius:12px;color:#fff;margin-left:5px}@media (max-width: 768px){.card-body.d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:1rem}}.shimmer-card[_ngcontent-%COMP%]{background:#ffffff40;border-radius:1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 32px #1f26875e;overflow:hidden}.shimmer-line[_ngcontent-%COMP%]{height:12px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:6px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.w-75[_ngcontent-%COMP%]{width:75%}.w-50[_ngcontent-%COMP%]{width:50%}"]})};export{F as BuyerComponent};
