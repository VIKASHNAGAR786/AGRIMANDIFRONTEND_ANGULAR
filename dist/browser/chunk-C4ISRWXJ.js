import{n as j,p as L}from"./chunk-KBWIPRLW.js";import{B as I,C as E,Da as D,Ea as O,G as o,Ga as B,Ha as M,I as f,Ia as T,J as w,N as P,Q as x,S as n,Sa as V,T as e,U as g,Ua as F,X as y,Y as v,Z as a,_ as S,da as i,ea as s,fa as p,ga as h,ra as b,sa as C,ua as k,v as u,w as m}from"./chunk-D4THGFNM.js";function A(l,r){l&1&&(n(0,"div",3)(1,"div",4)(2,"span",5),i(3,"Loading..."),e()()())}function U(l,r){if(l&1){let t=y();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),g(4,"img",10),e(),n(5,"div",11)(6,"div",12)(7,"h2",13),i(8),e(),n(9,"p",14),i(10),e(),n(11,"div",15)(12,"span",16),i(13),e(),n(14,"span",17),i(15),e(),n(16,"span",18),i(17),e()(),n(18,"ul",19)(19,"li",20)(20,"strong"),i(21,"Quantity:"),e(),i(22),e(),n(23,"li",20)(24,"strong"),i(25,"Price per Unit:"),e(),i(26),e(),n(27,"li",20)(28,"strong"),i(29,"Total Price:"),e(),i(30),e(),n(31,"li",20)(32,"strong"),i(33,"Location:"),e(),i(34),e(),n(35,"li",20)(36,"strong"),i(37,"Harvest Date:"),e(),i(38),b(39,"date"),e()(),n(40,"div",21)(41,"button",22),v("click",function(){u(t);let c=a();return m(c.downloadProductPdf(c.selectedproduct.productid))}),g(42,"i",23),i(43," Download PDF "),e(),n(44,"button",24),v("click",function(){u(t);let c=a();return m(c.contactFarmer(c.selectedproduct))}),g(45,"i",25),i(46," Contact Farmer "),e(),n(47,"button",26),v("click",function(){u(t);let c=a();return m(c.buyProduct(c.selectedproduct))}),g(48,"i",27),i(49," Buy "),e(),n(50,"button",28),v("click",function(){u(t);let c=a();return m(c.goBackToList())}),g(51,"i",29),i(52," Back to All Products "),e()()()()()()()}if(l&2){let t=a();o(4),x("src",t.selectedproduct.imageUrl||"https://via.placeholder.com/300",E)("alt",t.selectedproduct.name),o(4),s(t.selectedproduct.name),o(2),s(t.selectedproduct.description),o(3),s(t.selectedproduct.category),o(2),s(t.selectedproduct.grade),o(2),s(t.selectedproduct.status),o(5),h(" ",t.selectedproduct.quantity," ",t.selectedproduct.unit,""),o(4),p(" \u20B9",t.selectedproduct.pricePerUnit,""),o(4),p(" \u20B9",t.selectedproduct.totalPrice,""),o(4),p(" ",t.selectedproduct.location,""),o(4),p(" ",C(39,13,t.selectedproduct.harvestDate),"")}}function z(l,r){l&1&&(n(0,"div")(1,"p"),i(2,"No products available."),e()())}function N(l,r){if(l&1){let t=y();n(0,"div",32)(1,"div",33)(2,"div",34)(3,"h5",35),i(4),e(),n(5,"p",36),i(6),b(7,"slice"),e(),n(8,"div",37)(9,"span",38),i(10),e(),n(11,"span",17),i(12),e()(),n(13,"ul",39)(14,"li",40)(15,"strong"),i(16,"Qty:"),e(),i(17),e(),n(18,"li",40)(19,"strong"),i(20,"\u20B9/Unit:"),e(),i(21),e(),n(22,"li",40)(23,"strong"),i(24,"Location:"),e(),i(25),e(),n(26,"li",40)(27,"strong"),i(28,"Harvest:"),e(),i(29),b(30,"date"),e()(),n(31,"div",41)(32,"button",24),v("click",function(){let c=u(t).$implicit,_=a(2);return m(_.contactFarmer(c))}),i(33,"Contact Farmer"),e(),n(34,"button",22),v("click",function(){let c=u(t).$implicit,_=a(2);return m(_.viewDetails(c))}),i(35,"Detail View"),e(),n(36,"button",26),v("click",function(){let c=u(t).$implicit,_=a(2);return m(_.buyProduct(c))}),i(37,"Buy"),e()()()()()}if(l&2){let t=r.$implicit;o(3),S("title",t.name),o(),s(t.name),o(2),p("",k(7,10,t.description,0,60),"..."),o(4),s(t.category),o(2),s(t.grade),o(5),h(" ",t.quantity," ",t.unit,""),o(4),p(" \u20B9",t.pricePerUnit,""),o(4),p(" ",t.location,""),o(4),p(" ",C(30,14,t.harvestDate),"")}}function $(l,r){if(l&1&&(n(0,"div",6)(1,"div",30),P(2,N,38,16,"div",31),e()()),l&2){let t=a();o(2),x("ngForOf",t.products)}}var R=class l{constructor(r,t,d,c){this.productService=r;this.router=t;this.route=d;this.platformId=c}products=[];selectedproduct=null;loading=!0;ngOnInit(){this.checkAndLoadData()}checkAndLoadData(){this.route.params.subscribe(r=>{let t=r.productid;t?this.loadProductDetails(+t):this.loadAllProducts()})}loadProductDetails(r){this.loading=!0,this.productService.GetProductById(r).subscribe({next:t=>{this.loading=!1,this.selectedproduct=t||null,this.products=[]},error:t=>{this.loading=!1,this.selectedproduct=null,console.error("\u274C Error loading product details:",t)}})}loadAllProducts(){this.loading=!0,this.productService.GetAllProduct().subscribe({next:r=>{this.products=r,this.loading=!1,this.selectedproduct=null},error:r=>{this.loading=!1,console.error("\u274C Error fetching products:",r)}})}viewDetails(r){this.router.navigate(["products",r.productid])}goBackToList(){this.router.navigate(["/products"])}contactFarmer(r){console.log("\u{1F4DE} Contacting farmer for:",r)}buyProduct(r){console.log("\u{1F6D2} Buying product:",r)}downloadProductPdf(r){this.productService.getProductPdf(r).subscribe({next:t=>{let d=URL.createObjectURL(t),c=document.createElement("a");c.href=d,c.download="Product Report.pdf",c.click()},error:t=>{console.error("Failed to download PDF:",t)}})}static \u0275fac=function(t){return new(t||l)(f(L),f(F),f(V),f(I))};static \u0275cmp=w({type:l,selectors:[["app-productinventory"]],decls:4,vars:4,consts:[["class","d-flex justify-content-center align-items-center my-5",4,"ngIf"],["class","container my-5",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","my-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"container","my-5"],[1,"card","shadow-lg"],[1,"row","g-0"],[1,"col-md-5"],[1,"img-fluid","rounded-start","h-100","object-fit-cover",3,"src","alt"],[1,"col-md-7"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-muted"],[1,"mb-3"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-success"],[1,"badge","bg-info","text-dark"],[1,"list-group","list-group-flush","mb-3"],[1,"list-group-item"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-start","mt-4"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-file-earmark-arrow-down"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-envelope"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-cart-check"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-arrow-left"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-truncate",3,"title"],[1,"card-text","text-muted","small"],[1,"mb-2"],[1,"badge","bg-primary"],[1,"list-group","list-group-flush","mb-2","small"],[1,"list-group-item","px-0","py-1"],[1,"mt-auto","d-grid","gap-2"]],template:function(t,d){t&1&&P(0,A,4,0,"div",0)(1,U,53,15,"div",1)(2,z,3,0,"div",2)(3,$,3,1,"div",1),t&2&&(x("ngIf",d.loading),o(),x("ngIf",!d.loading&&d.selectedproduct),o(),x("ngIf",!d.loading&&!d.selectedproduct&&d.products.length===0),o(),x("ngIf",!d.loading&&!d.selectedproduct&&d.products.length>0))},dependencies:[T,D,O,M,B,j],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:10px;margin-top:60px}.product-card[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 10px;border-radius:8px;background-color:#fdfdfd;text-align:center;font-size:14px;margin-top:10px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:120px;height:auto;margin-bottom:8px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:5px;margin-top:10px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border:none;border-radius:5px;cursor:pointer;background-color:#79f208;color:#fff;flex:1}button[_ngcontent-%COMP%]:hover{background-color:#24b300}.card-text[_ngcontent-%COMP%]{font-size:.85rem}.btn[_ngcontent-%COMP%]{font-size:.8rem}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0003;transform:scale(1.02);transition:all .3s ease}.product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:8px}.product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#555}"]})};export{R as ProductinventoryComponent};
