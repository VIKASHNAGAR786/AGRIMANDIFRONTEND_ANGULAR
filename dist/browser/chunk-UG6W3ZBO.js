import{B as m,Ha as y,Ia as h,Ka as d,Wa as s,i as a,j as u,p,s as l}from"./chunk-4QSPUNRS.js";var g=class o{constructor(r,e){this.http=r;this.platformId=e}registerAsBuyerUrl=s.APIUrl+"Buyer/Registerasabuyer";savefarmerurl=s.APIUrl+"Farmer/Savefarmer";getfarmerurl=s.APIUrl+"Farmer/Getfarmerdata";getFarmerIdUrl=s.APIUrl+"Product/GetFarmerId";saveProfileImage=s.AccountApiUrl+"SaveProfileimage/Save_Profile_image";getprofileimage=s.AccountApiUrl+"GetProfileImage/get-profile-image";getallbuyers=s.APIUrl+"Buyer/GetAllBuyers";getbuyerbyid=s.APIUrl+"Buyer/GetBuyerById";getbuyerid=s.APIUrl+"Buyer/GetBuyerID";getAuthHeaders(){if(y(this.platformId)){let r=localStorage.getItem("auth_token");return new h({Authorization:`Bearer ${r}`})}return null}registerAsBuyer(r){let e=this.getAuthHeaders();return e?this.http.post(this.registerAsBuyerUrl,r,{headers:e}):a(null)}saveFarmer(r){let e=this.getAuthHeaders();return e?this.http.post(this.savefarmerurl,r,{headers:e}):a(null)}getFarmerData(){let r=this.getAuthHeaders();return r?this.http.get(this.getfarmerurl,{headers:r}):a(null)}getFarmerId(r,e){return this.http.get(`${this.getFarmerIdUrl}?email=${r}&name=${e}`)}uploadProfileImage(r,e){let t=new FormData;t.append("file",r,r.name),t.append("userid",e.toString());let i=this.getAuthHeaders();return i?this.http.post(this.saveProfileImage,t,{headers:i}):a(null)}getProfileImage(r){let e=this.getAuthHeaders(),t=`${this.getprofileimage}?userid=${r}`;return e?this.http.get(t,{headers:e,responseType:"blob"}):a(new Blob)}GetAllBuyers(){let r=this.getAuthHeaders();return r?this.http.get(this.getallbuyers,{headers:r}).pipe(u(e=>e.map(t=>{if(t.bytes&&t.contenttype){let i=this.base64ToByteArray(t.bytes),n=new Blob([i],{type:t.contenttype}),b=URL.createObjectURL(n);t.profileImageUrl=b}else t.profileImageUrl="images/profile.jpeg";return t}))):a([])}base64ToByteArray(r){let e=atob(r),t=e.length,i=new Uint8Array(t);for(let n=0;n<t;n++)i[n]=e.charCodeAt(n);return i}GetBuyerById(r){let e=this.getAuthHeaders();if(!e)return a(null);let t=`${this.getbuyerbyid}?buyerid=${r}`;return this.http.get(t,{headers:e})}GetBuyerByIdForProfile(r){let e=this.getAuthHeaders();if(!e)return a(null);let t=`${this.getbuyerbyid}?buyerid=${r}`;return this.http.get(t,{headers:e})}Getbuyerid(r){let e=this.getAuthHeaders();if(!e)return a(null);let t=`${this.getbuyerid}?userid=${r}`;return this.http.get(t,{headers:e})}static \u0275fac=function(e){return new(e||o)(l(d),l(m))};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{g as a};
