import{a as p,c as g,g as s}from"./chunk-DGXWINA3.js";import{s as h}from"./chunk-N7HDFMCH.js";import{D as n,M as l,T as d,Y as i,q as t,wa as c}from"./chunk-XGDP56UF.js";var A=class o{constructor(e,r){this.http=e;this.platformId=r}BASE_URL=s.BASE_URL;contactFarmerUrl=s.APIUrl+"Message/ContactFarmer";getAllSenderAndReceiverUrl=s.APIUrl+"Message/GetAllSenderAndBuyer";getAllMessageUserByUrl=s.APIUrl+"Message/GetAllMessageUserBy";sendMessageUrl=s.APIUrl+"Message/SendMessage";headersCache=null;getAuthHeaders(){if(!this.headersCache&&h(this.platformId)){let e=localStorage.getItem("auth_token");e&&(this.headersCache=new p({Authorization:`Bearer ${e}`}))}return this.headersCache}ContactFarmer(e){let r=this.getAuthHeaders();return r?this.http.post(this.contactFarmerUrl,e,{headers:r}).pipe(l(1),n(a=>(console.error("ContactFarmer error",a),t(null)))):t(null)}GetAllSenderAndReceiverData(){let e=this.getAuthHeaders();return e?this.http.get(this.getAllSenderAndReceiverUrl,{headers:e}).pipe(l(1),n(r=>(console.error("GetAllSenderAndReceiverData error",r),t([])))):t([])}GetAllMessageUserBy(e){let r=this.getAuthHeaders();return r?this.http.get(`${this.getAllMessageUserByUrl}?useridformessage=${e}`,{headers:r}).pipe(n(a=>(console.error("GetAllMessageUserBy error",a),t([])))):t([])}sendMessage(e){let r=this.getAuthHeaders();return r?this.http.post(this.sendMessageUrl,e,{headers:r}).pipe(l(1),n(a=>(console.error("SendMessage error:",a),t(null)))):(console.error("User not authenticated. Cannot send message."),t(null))}static \u0275fac=function(r){return new(r||o)(i(g),i(c))};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};export{A as a};
