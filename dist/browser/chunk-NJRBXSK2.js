import{a}from"./chunk-NLJOITTN.js";import{a as m}from"./chunk-JFGKKBV5.js";import{b as p,d as g}from"./chunk-LO4VKSRB.js";import{u as h}from"./chunk-YLYAE3YR.js";import{F as n,O as o,V as d,_ as i,s as t,za as c}from"./chunk-FFU2WZLN.js";var u=class l{constructor(e,r,s){this.http=e;this.platformId=r;this.userInfo=s}BASE_URL=a.BASE_URL;contactFarmerUrl=a.APIUrl+"Message/ContactFarmer";getAllSenderAndReceiverUrl=a.APIUrl+"Message/GetAllSenderAndBuyer";getAllMessageUserByUrl=a.APIUrl+"Message/GetAllMessageUserBy";sendMessageUrl=a.APIUrl+"Message/SendMessage";headersCache=null;getAuthHeaders(){if(!this.headersCache&&h(this.platformId)){let e=this.userInfo.getToken();e&&(this.headersCache=new p({Authorization:`Bearer ${e}`}))}return this.headersCache}ContactFarmer(e){let r=this.getAuthHeaders();return r?this.http.post(this.contactFarmerUrl,e,{headers:r}).pipe(o(1),n(s=>(console.error("ContactFarmer error",s),t(null)))):t(null)}GetAllSenderAndReceiverData(){let e=this.getAuthHeaders();return e?this.http.get(this.getAllSenderAndReceiverUrl,{headers:e}).pipe(o(1),n(r=>(console.error("GetAllSenderAndReceiverData error",r),t([])))):t([])}GetAllMessageUserBy(e){let r=this.getAuthHeaders();return r?this.http.get(`${this.getAllMessageUserByUrl}?useridformessage=${e}`,{headers:r}).pipe(n(s=>(console.error("GetAllMessageUserBy error",s),t([])))):t([])}sendMessage(e){let r=this.getAuthHeaders();return r?this.http.post(this.sendMessageUrl,e,{headers:r}).pipe(o(1),n(s=>(console.error("SendMessage error:",s),t(null)))):(console.error("User not authenticated. Cannot send message."),t(null))}static \u0275fac=function(r){return new(r||l)(i(g),i(c),i(m))};static \u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})};export{u as a};
