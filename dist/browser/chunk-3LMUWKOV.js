import{b as N,d as W,e as R,f as j,g as z,h as q,i as G,l as H,m as Q,n as K,r as J,t as Y,u as Z}from"./chunk-HZMSSRIC.js";import{C as E,D as M,Ea as V,Fa as A,G as a,Ha as B,I as h,Ia as L,J as I,Ja as O,N as C,Q as g,S as r,T as t,Ta as T,U as p,Va as U,X as P,Y as x,Z as c,_ as F,_a as X,da as n,ea as b,fa as y,ga as S,ia as f,ja as v,ka as _,sa as w,ta as k,va as D,w as s,x as m}from"./chunk-CJCXE57S.js";function ee(u,d){u&1&&(r(0,"div",3)(1,"div",4)(2,"span",5),n(3,"Loading..."),t()()())}function te(u,d){if(u&1){let e=P();r(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),p(4,"img",10),t(),r(5,"div",11)(6,"div",12)(7,"h2",13),n(8),t(),r(9,"p",14),n(10),t(),r(11,"div",15)(12,"span",16),n(13),t(),r(14,"span",17),n(15),t(),r(16,"span",18),n(17),t()(),r(18,"ul",19)(19,"li",20)(20,"strong"),n(21,"Quantity:"),t(),n(22),t(),r(23,"li",20)(24,"strong"),n(25,"Price per Unit:"),t(),n(26),t(),r(27,"li",20)(28,"strong"),n(29,"Total Price:"),t(),n(30),t(),r(31,"li",20)(32,"strong"),n(33,"Location:"),t(),n(34),t(),r(35,"li",20)(36,"strong"),n(37,"Harvest Date:"),t(),n(38),w(39,"date"),t()(),r(40,"div",21)(41,"button",22),x("click",function(){s(e);let o=c();return m(o.viewProductPdf(o.selectedproduct.productid))}),p(42,"i",23),n(43," Download PDF "),t(),r(44,"button",24),x("click",function(){s(e);let o=c();return m(o.contactFarmer(o.selectedproduct))}),p(45,"i",25),n(46," Contact Farmer "),t(),r(47,"button",26),x("click",function(){s(e);let o=c();return m(o.buyProduct(o.selectedproduct))}),p(48,"i",27),n(49," Buy "),t(),r(50,"button",28),x("click",function(){s(e);let o=c();return m(o.goBackToList())}),p(51,"i",29),n(52," Back to All Products "),t()()()()()()()}if(u&2){let e=c();a(4),g("src",e.selectedproduct.imageUrl||"https://via.placeholder.com/300",M)("alt",e.selectedproduct.name),a(4),b(e.selectedproduct.name),a(2),b(e.selectedproduct.description),a(3),b(e.selectedproduct.category),a(2),b(e.selectedproduct.grade),a(2),b(e.selectedproduct.status),a(5),S(" ",e.selectedproduct.quantity," ",e.selectedproduct.unit,""),a(4),y(" \u20B9",e.selectedproduct.pricePerUnit,""),a(4),y(" \u20B9",e.selectedproduct.totalPrice,""),a(4),y(" ",e.selectedproduct.location,""),a(4),y(" ",k(39,13,e.selectedproduct.harvestDate),"")}}function ie(u,d){u&1&&(r(0,"div")(1,"div",30)(2,"div",31)(3,"p",32),n(4," \u{1F512} Kindly "),r(5,"span",33),n(6,"log in"),t(),n(7," to unveil the marketplace magic! "),t(),r(8,"p",34),n(9," Only the worthy may pass beyond this gate... "),t()()()())}function ne(u,d){if(u&1){let e=P();r(0,"div",65)(1,"div",66)(2,"div",67)(3,"h5",68),n(4),t(),r(5,"p",69),n(6),w(7,"slice"),t(),r(8,"div",70)(9,"span",71),n(10),t(),r(11,"span",17),n(12),t()(),r(13,"ul",72)(14,"li",73)(15,"strong"),n(16,"Qty:"),t(),n(17),t(),r(18,"li",73)(19,"strong"),n(20,"\u20B9/Unit:"),t(),n(21),t(),r(22,"li",73)(23,"strong"),n(24,"Location:"),t(),n(25),t(),r(26,"li",73)(27,"strong"),n(28,"Harvest:"),t(),n(29),w(30,"date"),t()(),r(31,"div",74)(32,"button",24),x("click",function(){let o=s(e).$implicit,l=c(2);return m(l.contactFarmer(o))}),n(33,"Contact Farmer"),t(),r(34,"button",22),x("click",function(){let o=s(e).$implicit,l=c(2);return m(l.viewDetails(o))}),n(35,"Detail View"),t(),r(36,"button",26),x("click",function(){let o=s(e).$implicit,l=c(2);return m(l.buyProduct(o))}),n(37,"Buy"),t()()()()()}if(u&2){let e=d.$implicit;a(3),F("title",e.name),a(),b(e.name),a(2),y("",D(7,10,e.description,0,60),"..."),a(4),b(e.category),a(2),b(e.grade),a(5),S(" ",e.quantity," ",e.unit,""),a(4),y(" \u20B9",e.pricePerUnit,""),a(4),y(" ",e.location,""),a(4),y(" ",k(30,14,e.harvestDate),"")}}function re(u,d){if(u&1){let e=P();r(0,"div",6)(1,"div",35)(2,"h3",36),n(3,"\u{1F50D} Filter Products"),t(),r(4,"form",37),x("ngSubmit",function(){s(e);let o=c();return m(o.loadAllProducts(o.filterForm))}),r(5,"div")(6,"label",38),p(7,"i",39),n(8,"Product Name "),t(),r(9,"input",40),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.Name,o)||(l.filterForm.Name=o),m(o)}),t()(),r(10,"div")(11,"label",41),p(12,"i",42),n(13,"Category "),t(),r(14,"input",43),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.Category,o)||(l.filterForm.Category=o),m(o)}),t()(),r(15,"div")(16,"label",44),p(17,"i",45),n(18,"Location "),t(),r(19,"input",46),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.Location,o)||(l.filterForm.Location=o),m(o)}),t()(),r(20,"div")(21,"label",47),p(22,"i",48),n(23,"Availability "),t(),r(24,"select",49),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.Availability,o)||(l.filterForm.Availability=o),m(o)}),r(25,"option",50),n(26,"-- All --"),t(),r(27,"option",51),n(28,"Available"),t(),r(29,"option",51),n(30,"Not Available"),t()()(),r(31,"div")(32,"label",52),p(33,"i",53),n(34,"Min Price "),t(),r(35,"input",54),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.MinPrice,o)||(l.filterForm.MinPrice=o),m(o)}),t()(),r(36,"div")(37,"label",55),p(38,"i",56),n(39,"Max Price "),t(),r(40,"input",57),_("ngModelChange",function(o){s(e);let l=c();return v(l.filterForm.MaxPrice,o)||(l.filterForm.MaxPrice=o),m(o)}),t()(),r(41,"div",58)(42,"button",59),p(43,"i",60),n(44,"Search "),t()(),r(45,"div",58)(46,"button",61),x("click",function(){s(e);let o=c();return m(o.resetFilters())}),p(47,"i",62),n(48,"Reset "),t()()()(),r(49,"div",63),C(50,ne,38,16,"div",64),t()()}if(u&2){let e=c();a(9),f("ngModel",e.filterForm.Name),a(5),f("ngModel",e.filterForm.Category),a(5),f("ngModel",e.filterForm.Location),a(5),f("ngModel",e.filterForm.Availability),a(),g("ngValue",null),a(2),g("value",!0),a(2),g("value",!1),a(6),f("ngModel",e.filterForm.MinPrice),a(5),f("ngModel",e.filterForm.MaxPrice),a(10),g("ngForOf",e.products)}}var $=class u{constructor(d,e,i,o,l){this.productService=d;this.router=e;this.route=i;this.platformId=o;this.alertService=l}products=[];selectedproduct=null;filterForm={Name:"",Category:"",Location:"",MinPrice:null,MaxPrice:null,Availability:null};BASE_URL=X.BASE_URL;loading=!0;ngOnInit(){this.checkAndLoadData()}resetFilters(){this.filterForm={Name:"",Category:"",Location:"",Availability:null,MinPrice:null,MaxPrice:null},this.loadAllProducts(this.filterForm)}checkAndLoadData(){this.route.params.subscribe(d=>{let e=d.productid;e?this.loadProductDetails(+e):this.loadAllProducts()})}loadProductDetails(d){this.loading=!0,this.productService.GetProductById(d).subscribe({next:e=>{this.loading=!1,e.imageUrl&&(e.imageUrl=`${this.BASE_URL}${e.imageUrl}`),this.selectedproduct=e||null,this.products=[],console.log("\u{1F4E6} Product details loaded:",this.selectedproduct)},error:e=>{this.loading=!1,this.selectedproduct=null,this.alertService.showAlert("\u274C Error loading product details:",e)}})}loadAllProducts(d=null){this.loading=!0,this.productService.GetAllProduct(d||void 0).subscribe({next:e=>{this.products=e.map(i=>({productid:i.productid,name:i.name,description:i.description,category:i.category,type:i.type,variety:i.variety,grade:i.grade,quantity:i.quantity,unit:i.unit,pricePerUnit:i.pricePerUnit,totalPrice:i.totalPrice,availability:i.availability,location:i.location,harvestDate:i.harvestDate,expiryDate:i.expiryDate,storageCondition:i.storageCondition,packagingType:i.packagingType,certification:i.certification,imageUrl:i.imageUrl?`${this.BASE_URL}/ProductImages/${i.imageUrl}`:void 0,farmerId:i.farmerId,addedDate:i.addedDate,updatedDate:i.updatedDate,status:i.status})),this.loading=!1,this.selectedproduct=null},error:e=>{this.loading=!1,this.alertService.showAlert("\u274C Error fetching products: Please Login first","error")}})}viewDetails(d){this.router.navigate(["products",d.productid])}goBackToList(){this.router.navigate(["/products"])}contactFarmer(d){console.log("\u{1F4DE} Contacting farmer for:",d)}buyProduct(d){console.log("\u{1F6D2} Buying product:",d)}viewProductPdf(d){this.productService.getProductPdf(d).subscribe({next:e=>{let i=new Blob([e],{type:"application/pdf"}),o=window.URL.createObjectURL(i);window.open(o,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(o),5e3)},error:e=>{this.alertService.showAlert("Failed to load PDF:",e),this.alertService.showAlert("unable to open pdf please try again","error")}})}static \u0275fac=function(e){return new(e||u)(h(Z),h(U),h(T),h(E),h(Y))};static \u0275cmp=I({type:u,selectors:[["app-productinventory"]],decls:4,vars:4,consts:[["class","d-flex justify-content-center align-items-center my-5",4,"ngIf"],["class","container my-5",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","my-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"container","my-5"],[1,"card","shadow-lg"],[1,"row","g-0"],[1,"col-md-5"],[1,"img-fluid","rounded-start","h-100","object-fit-cover",3,"src","alt"],[1,"col-md-7"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-muted"],[1,"mb-3"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-success"],[1,"badge","bg-info","text-dark"],[1,"list-group","list-group-flush","mb-3"],[1,"list-group-item"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-start","mt-4"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-file-earmark-arrow-down"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-envelope"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-cart-check"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-arrow-left"],[1,"tw"],[1,"flex","flex-col","items-center","justify-center","py-10","px-4","bg-gradient-to-r","from-indigo-900","via-purple-800","to-indigo'900","rounded-xl","shadow-2xl","animate-fade-in"],[1,"text-xl","font-semibold","text-white","tracking-wide"],[1,"text-yellow-300"],[1,"text-sm","text-purple-200","mt-2","italic"],[1,"bg-white","dark:bg-gray-900","shadow-lg","border","border-gray-200","dark:border-gray-800","rounded-3xl","p-6","mb-8"],[1,"text-2xl","font-semibold","text-gray-800","dark:text-white","mb-6"],["autocomplete","off",1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","xl:grid-cols-4","gap-6",3,"ngSubmit"],["for","name",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-box-seam","mr-2"],["type","text","id","name","name","name","placeholder","Enter product name",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["for","category",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-tags","mr-2"],["type","text","id","category","name","category","placeholder","Enter category",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["for","location",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-geo-alt","mr-2"],["type","text","id","location","name","location","placeholder","Enter location",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["for","availability",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-check-circle","mr-2"],["id","availability","name","availability",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value"],["for","minPrice",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-cash-coin","mr-2"],["type","number","id","minPrice","name","minPrice","placeholder","Minimum price",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["for","maxPrice",1,"block","text-gray-700","dark:text-gray-300","mb-2","font-medium"],[1,"bi","bi-cash-stack","mr-2"],["type","number","id","maxPrice","name","maxPrice","placeholder","Maximum price",1,"w-full","px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],[1,"flex","items-end"],["type","submit",1,"w-full","bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-xl","font-semibold","shadow","transition","duration-300"],[1,"bi","bi-search","mr-2"],["type","button",1,"w-full","bg-red-50","text-red-600","hover:bg-red-100","border","border-red-300","px-6","py-3","rounded-xl","font-semibold","shadow","transition","duration-300",3,"click"],[1,"bi","bi-arrow-counterclockwise","mr-2"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-truncate",3,"title"],[1,"card-text","text-muted","small"],[1,"mb-2"],[1,"badge","bg-primary"],[1,"list-group","list-group-flush","mb-2","small"],[1,"list-group-item","px-0","py-1"],[1,"mt-auto","d-grid","gap-2"]],template:function(e,i){e&1&&C(0,ee,4,0,"div",0)(1,te,53,15,"div",1)(2,ie,10,0,"div",2)(3,re,51,10,"div",1),e&2&&(g("ngIf",i.loading),a(),g("ngIf",!i.loading&&i.selectedproduct),a(),g("ngIf",!i.loading&&!i.selectedproduct&&i.products.length===0),a(),g("ngIf",!i.loading&&!i.selectedproduct&&i.products.length>0))},dependencies:[O,V,A,L,B,J,q,Q,K,N,G,H,W,R,z,j],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:10px;margin-top:60px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:120px;height:auto;margin-bottom:8px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:5px;margin-top:10px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border:none;border-radius:5px;cursor:pointer;background-color:#79f208;color:#fff;flex:1}button[_ngcontent-%COMP%]:hover{background-color:#24b300}.card-text[_ngcontent-%COMP%]{font-size:.85rem}.btn[_ngcontent-%COMP%]{font-size:.8rem}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0003;transform:scale(1.02);transition:all .3s ease}.product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:8px}.product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.3);border-radius:1.25rem;transition:all .3s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 24px #0003}"]})};export{$ as ProductinventoryComponent};
