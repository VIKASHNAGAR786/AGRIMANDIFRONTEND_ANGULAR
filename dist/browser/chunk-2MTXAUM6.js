import{n as F,p as M}from"./chunk-7LWPF327.js";import{B as S,C as f,Ca as k,Da as D,Fa as B,G as r,Ga as T,I as g,J as w,N as P,Q as m,Qa as V,S as n,Sa as O,T as e,U as y,X as E,Y as x,Z as p,_ as I,da as i,ea as _,fa as l,ga as b,ra as h,sa as C,v as s,w as u}from"./chunk-GABFAH7D.js";function R(a,o){a&1&&(n(0,"div"),i(1,"Loading products..."),e())}function U(a,o){if(a&1){let t=E();n(0,"div",3)(1,"h2"),i(2,"Product Details"),e(),n(3,"div",4),y(4,"img",5),n(5,"h3"),i(6),e(),n(7,"p"),i(8),e(),n(9,"p")(10,"strong"),i(11,"Category:"),e(),i(12),e(),n(13,"p")(14,"strong"),i(15,"Grade:"),e(),i(16),e(),n(17,"p")(18,"strong"),i(19,"Qty:"),e(),i(20),e(),n(21,"p")(22,"strong"),i(23,"\u20B9/Unit:"),e(),i(24),e(),n(25,"p")(26,"strong"),i(27,"Total:"),e(),i(28),e(),n(29,"p")(30,"strong"),i(31,"Status:"),e(),i(32),e(),n(33,"p")(34,"strong"),i(35,"Location:"),e(),i(36),e(),n(37,"p")(38,"strong"),i(39,"Harvest:"),e(),i(40),h(41,"date"),e(),n(42,"button",6),x("click",function(){s(t);let d=p();return u(d.downloadProductPdf(d.selectedproduct.productid))}),i(43,"Download Product PDF"),e(),n(44,"div",7)(45,"button",6),x("click",function(){s(t);let d=p();return u(d.contactFarmer(d.selectedproduct))}),i(46,"Contact Farmer"),e(),n(47,"button",6),x("click",function(){s(t);let d=p();return u(d.buyProduct(d.selectedproduct))}),i(48,"Buy"),e(),n(49,"button",6),x("click",function(){s(t);let d=p();return u(d.goBackToList())}),i(50,"Back to All Products"),e()()()()}if(a&2){let t=p();r(4),I("alt",t.selectedproduct.name),m("src",t.selectedproduct.imageUrl||"https://via.placeholder.com/150",f),r(2),_(t.selectedproduct.name),r(2),_(t.selectedproduct.description),r(4),l(" ",t.selectedproduct.category,""),r(4),l(" ",t.selectedproduct.grade,""),r(4),b(" ",t.selectedproduct.quantity," ",t.selectedproduct.unit,""),r(4),l(" \u20B9",t.selectedproduct.pricePerUnit,""),r(4),l(" \u20B9",t.selectedproduct.totalPrice,""),r(4),l(" ",t.selectedproduct.status,""),r(4),l(" ",t.selectedproduct.location,""),r(4),l(" ",C(41,13,t.selectedproduct.harvestDate),"")}}function A(a,o){a&1&&(n(0,"div")(1,"p"),i(2,"No products available."),e()())}function j(a,o){if(a&1){let t=E();n(0,"div",4),y(1,"img",5),n(2,"h3"),i(3),e(),n(4,"p"),i(5),e(),n(6,"p")(7,"strong"),i(8,"Category:"),e(),i(9),e(),n(10,"p")(11,"strong"),i(12,"Grade:"),e(),i(13),e(),n(14,"p")(15,"strong"),i(16,"Qty:"),e(),i(17),e(),n(18,"p")(19,"strong"),i(20,"\u20B9/Unit:"),e(),i(21),e(),n(22,"p")(23,"strong"),i(24,"Total:"),e(),i(25),e(),n(26,"p")(27,"strong"),i(28,"Status:"),e(),i(29),e(),n(30,"p")(31,"strong"),i(32,"Location:"),e(),i(33),e(),n(34,"p")(35,"strong"),i(36,"Harvest:"),e(),i(37),h(38,"date"),e(),n(39,"div",7)(40,"button",6),x("click",function(){let d=s(t).$implicit,v=p(2);return u(v.contactFarmer(d))}),i(41,"Contact Farmer"),e(),n(42,"button",6),x("click",function(){let d=s(t).$implicit,v=p(2);return u(v.viewDetails(d))}),i(43,"Detail View"),e(),n(44,"button",6),x("click",function(){let d=s(t).$implicit,v=p(2);return u(v.buyProduct(d))}),i(45,"Buy"),e()()()}if(a&2){let t=o.$implicit;r(),I("alt",t.name),m("src",t.imageUrl||"https://via.placeholder.com/150",f),r(2),_(t.name),r(2),_(t.description),r(4),l(" ",t.category,""),r(4),l(" ",t.grade,""),r(4),b(" ",t.quantity," ",t.unit,""),r(4),l(" \u20B9",t.pricePerUnit,""),r(4),l(" \u20B9",t.totalPrice,""),r(4),l(" ",t.status,""),r(4),l(" ",t.location,""),r(4),l(" ",C(38,13,t.harvestDate),"")}}function N(a,o){if(a&1&&(n(0,"div",8),P(1,j,46,15,"div",9),e()),a&2){let t=p();r(),m("ngForOf",t.products)}}var L=class a{constructor(o,t,c,d){this.productService=o;this.router=t;this.route=c;this.platformId=d}products=[];selectedproduct=null;loading=!0;ngOnInit(){this.checkAndLoadData()}checkAndLoadData(){this.route.params.subscribe(o=>{let t=o.productid;t?this.loadProductDetails(+t):this.loadAllProducts()})}loadProductDetails(o){this.loading=!0,this.productService.GetProductById(o).subscribe({next:t=>{this.loading=!1,this.selectedproduct=t||null,this.products=[]},error:t=>{this.loading=!1,this.selectedproduct=null,console.error("\u274C Error loading product details:",t)}})}loadAllProducts(){this.loading=!0,this.productService.GetAllProduct().subscribe({next:o=>{this.products=o,this.loading=!1,this.selectedproduct=null},error:o=>{this.loading=!1,console.error("\u274C Error fetching products:",o)}})}viewDetails(o){this.router.navigate(["products",o.productid])}goBackToList(){this.router.navigate(["/products"])}contactFarmer(o){console.log("\u{1F4DE} Contacting farmer for:",o)}buyProduct(o){console.log("\u{1F6D2} Buying product:",o)}downloadProductPdf(o){this.productService.getProductPdf(o).subscribe({next:t=>{let c=URL.createObjectURL(t),d=document.createElement("a");d.href=c,d.download="Product Report.pdf",d.click()},error:t=>{console.error("Failed to download PDF:",t)}})}static \u0275fac=function(t){return new(t||a)(g(M),g(O),g(V),g(S))};static \u0275cmp=w({type:a,selectors:[["app-productinventory"]],decls:4,vars:4,consts:[[4,"ngIf"],["class","product-detail",4,"ngIf"],["class","product-grid",4,"ngIf"],[1,"product-detail"],[1,"product-card"],["width","150",3,"src","alt"],[3,"click"],[1,"button-group"],[1,"product-grid"],["class","product-card",4,"ngFor","ngForOf"]],template:function(t,c){t&1&&P(0,R,2,0,"div",0)(1,U,51,15,"div",1)(2,A,3,0,"div",0)(3,N,2,1,"div",2),t&2&&(m("ngIf",c.loading),r(),m("ngIf",!c.loading&&c.selectedproduct),r(),m("ngIf",!c.loading&&!c.selectedproduct&&c.products.length===0),r(),m("ngIf",!c.loading&&!c.selectedproduct&&c.products.length>0))},dependencies:[T,k,D,B,F],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:10px;margin-top:60px}.product-card[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 10px;border-radius:8px;background-color:#fdfdfd;text-align:center;font-size:14px;margin-top:10px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:120px;height:auto;margin-bottom:8px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:5px;margin-top:10px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border:none;border-radius:5px;cursor:pointer;background-color:#79f208;color:#fff;flex:1}button[_ngcontent-%COMP%]:hover{background-color:#24b300}"]})};export{L as ProductinventoryComponent};
