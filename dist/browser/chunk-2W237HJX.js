import{b as W,c as j,d as R,e as U,f as z,g as G,h as q,i as H,j as Q,k as J,n as K,p as X}from"./chunk-7AKXUMGM.js";import{B as E,C as F,Ca as B,Da as O,Fa as T,G as o,Ga as D,Ha as L,I as P,J as I,N as w,Q as g,Ra as A,S as n,T as t,Ta as N,U as p,X as C,Y as v,Z as d,_ as k,da as r,ea as x,fa as _,ga as S,ia as b,ja as f,ka as y,qa as h,ra as M,ta as V,v as m,w as s}from"./chunk-6W7SYUOL.js";function Z(u,c){u&1&&(n(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),t()()())}function $(u,c){if(u&1){let e=C();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),p(4,"img",10),t(),n(5,"div",11)(6,"div",12)(7,"h2",13),r(8),t(),n(9,"p",14),r(10),t(),n(11,"div",15)(12,"span",16),r(13),t(),n(14,"span",17),r(15),t(),n(16,"span",18),r(17),t()(),n(18,"ul",19)(19,"li",20)(20,"strong"),r(21,"Quantity:"),t(),r(22),t(),n(23,"li",20)(24,"strong"),r(25,"Price per Unit:"),t(),r(26),t(),n(27,"li",20)(28,"strong"),r(29,"Total Price:"),t(),r(30),t(),n(31,"li",20)(32,"strong"),r(33,"Location:"),t(),r(34),t(),n(35,"li",20)(36,"strong"),r(37,"Harvest Date:"),t(),r(38),h(39,"date"),t()(),n(40,"div",21)(41,"button",22),v("click",function(){m(e);let i=d();return s(i.viewProductPdf(i.selectedproduct.productid))}),p(42,"i",23),r(43," Download PDF "),t(),n(44,"button",24),v("click",function(){m(e);let i=d();return s(i.contactFarmer(i.selectedproduct))}),p(45,"i",25),r(46," Contact Farmer "),t(),n(47,"button",26),v("click",function(){m(e);let i=d();return s(i.buyProduct(i.selectedproduct))}),p(48,"i",27),r(49," Buy "),t(),n(50,"button",28),v("click",function(){m(e);let i=d();return s(i.goBackToList())}),p(51,"i",29),r(52," Back to All Products "),t()()()()()()()}if(u&2){let e=d();o(4),g("src",e.selectedproduct.imageUrl||"https://via.placeholder.com/300",F)("alt",e.selectedproduct.name),o(4),x(e.selectedproduct.name),o(2),x(e.selectedproduct.description),o(3),x(e.selectedproduct.category),o(2),x(e.selectedproduct.grade),o(2),x(e.selectedproduct.status),o(5),S(" ",e.selectedproduct.quantity," ",e.selectedproduct.unit,""),o(4),_(" \u20B9",e.selectedproduct.pricePerUnit,""),o(4),_(" \u20B9",e.selectedproduct.totalPrice,""),o(4),_(" ",e.selectedproduct.location,""),o(4),_(" ",M(39,13,e.selectedproduct.harvestDate),"")}}function ee(u,c){u&1&&(n(0,"div")(1,"p"),r(2,"No products available."),t()())}function te(u,c){if(u&1){let e=C();n(0,"div",61)(1,"div",62)(2,"div",63)(3,"h5",64),r(4),t(),n(5,"p",65),r(6),h(7,"slice"),t(),n(8,"div",66)(9,"span",67),r(10),t(),n(11,"span",17),r(12),t()(),n(13,"ul",68)(14,"li",69)(15,"strong"),r(16,"Qty:"),t(),r(17),t(),n(18,"li",69)(19,"strong"),r(20,"\u20B9/Unit:"),t(),r(21),t(),n(22,"li",69)(23,"strong"),r(24,"Location:"),t(),r(25),t(),n(26,"li",69)(27,"strong"),r(28,"Harvest:"),t(),r(29),h(30,"date"),t()(),n(31,"div",70)(32,"button",24),v("click",function(){let i=m(e).$implicit,a=d(2);return s(a.contactFarmer(i))}),r(33,"Contact Farmer"),t(),n(34,"button",22),v("click",function(){let i=m(e).$implicit,a=d(2);return s(a.viewDetails(i))}),r(35,"Detail View"),t(),n(36,"button",26),v("click",function(){let i=m(e).$implicit,a=d(2);return s(a.buyProduct(i))}),r(37,"Buy"),t()()()()()}if(u&2){let e=c.$implicit;o(3),k("title",e.name),o(),x(e.name),o(2),_("",V(7,10,e.description,0,60),"..."),o(4),x(e.category),o(2),x(e.grade),o(5),S(" ",e.quantity," ",e.unit,""),o(4),_(" \u20B9",e.pricePerUnit,""),o(4),_(" ",e.location,""),o(4),_(" ",M(30,14,e.harvestDate),"")}}function ie(u,c){if(u&1){let e=C();n(0,"div",6)(1,"div",30)(2,"form",31),v("ngSubmit",function(){m(e);let i=d();return s(i.loadAllProducts(i.filterForm))}),n(3,"div",32)(4,"div",33)(5,"input",34),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.Name,i)||(a.filterForm.Name=i),s(i)}),t(),n(6,"label",35),p(7,"i",36),r(8,"Product Name"),t()()(),n(9,"div",32)(10,"div",33)(11,"input",37),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.Category,i)||(a.filterForm.Category=i),s(i)}),t(),n(12,"label",38),p(13,"i",39),r(14,"Category"),t()()(),n(15,"div",32)(16,"div",33)(17,"input",40),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.Location,i)||(a.filterForm.Location=i),s(i)}),t(),n(18,"label",41),p(19,"i",42),r(20,"Location"),t()()(),n(21,"div",32)(22,"div",33)(23,"select",43),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.Availability,i)||(a.filterForm.Availability=i),s(i)}),n(24,"option",44),r(25,"-- All --"),t(),n(26,"option",45),r(27,"Available"),t(),n(28,"option",45),r(29,"Not Available"),t()(),n(30,"label",46),p(31,"i",47),r(32,"Availability"),t()()(),n(33,"div",32)(34,"div",33)(35,"input",48),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.MinPrice,i)||(a.filterForm.MinPrice=i),s(i)}),t(),n(36,"label",49),p(37,"i",50),r(38,"Min Price"),t()()(),n(39,"div",32)(40,"div",33)(41,"input",51),y("ngModelChange",function(i){m(e);let a=d();return f(a.filterForm.MaxPrice,i)||(a.filterForm.MaxPrice=i),s(i)}),t(),n(42,"label",52),p(43,"i",53),r(44,"Max Price"),t()()(),n(45,"div",54)(46,"button",55),p(47,"i",56),r(48,"Search Products "),t()(),n(49,"div",54)(50,"button",57),v("click",function(){m(e);let i=d();return s(i.resetFilters())}),p(51,"i",58),r(52,"Reset Filters "),t()()()(),n(53,"div",59),w(54,te,38,16,"div",60),t()()}if(u&2){let e=d();o(5),b("ngModel",e.filterForm.Name),o(6),b("ngModel",e.filterForm.Category),o(6),b("ngModel",e.filterForm.Location),o(6),b("ngModel",e.filterForm.Availability),o(),g("ngValue",null),o(2),g("value",!0),o(2),g("value",!1),o(7),b("ngModel",e.filterForm.MinPrice),o(6),b("ngModel",e.filterForm.MaxPrice),o(13),g("ngForOf",e.products)}}var Y=class u{constructor(c,e,l,i){this.productService=c;this.router=e;this.route=l;this.platformId=i}products=[];selectedproduct=null;filterForm={Name:"",Category:"",Location:"",MinPrice:null,MaxPrice:null,Availability:null};loading=!0;ngOnInit(){this.checkAndLoadData()}resetFilters(){this.filterForm={Name:"",Category:"",Location:"",Availability:!0,MinPrice:0,MaxPrice:0},this.loadAllProducts(this.filterForm)}checkAndLoadData(){this.route.params.subscribe(c=>{let e=c.productid;e?this.loadProductDetails(+e):this.loadAllProducts()})}loadProductDetails(c){this.loading=!0,this.productService.GetProductById(c).subscribe({next:e=>{this.loading=!1,this.selectedproduct=e||null,this.products=[]},error:e=>{this.loading=!1,this.selectedproduct=null,console.error("\u274C Error loading product details:",e)}})}loadAllProducts(c=null){this.loading=!0,this.productService.GetAllProduct(c||void 0).subscribe({next:e=>{this.products=e,this.loading=!1,this.selectedproduct=null},error:e=>{this.loading=!1,console.error("\u274C Error fetching products:",e)}})}viewDetails(c){this.router.navigate(["products",c.productid])}goBackToList(){this.router.navigate(["/products"])}contactFarmer(c){console.log("\u{1F4DE} Contacting farmer for:",c)}buyProduct(c){console.log("\u{1F6D2} Buying product:",c)}viewProductPdf(c){this.productService.getProductPdf(c).subscribe({next:e=>{let l=new Blob([e],{type:"application/pdf"}),i=window.URL.createObjectURL(l);window.open(i,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(i),5e3)},error:e=>{console.error("Failed to load PDF:",e),alert("Unable to open the product PDF. Please try again later.")}})}static \u0275fac=function(e){return new(e||u)(P(X),P(N),P(A),P(E))};static \u0275cmp=I({type:u,selectors:[["app-productinventory"]],decls:4,vars:4,consts:[["class","d-flex justify-content-center align-items-center my-5",4,"ngIf"],["class","container my-5",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","my-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"container","my-5"],[1,"card","shadow-lg"],[1,"row","g-0"],[1,"col-md-5"],[1,"img-fluid","rounded-start","h-100","object-fit-cover",3,"src","alt"],[1,"col-md-7"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-muted"],[1,"mb-3"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-success"],[1,"badge","bg-info","text-dark"],[1,"list-group","list-group-flush","mb-3"],[1,"list-group-item"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-start","mt-4"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-file-earmark-arrow-down"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-envelope"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-cart-check"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-arrow-left"],[1,"card","mb-4","p-4","shadow-sm","bg-white","border","rounded-4"],["autocomplete","off",1,"row","g-3","align-items-end",3,"ngSubmit"],[1,"col-md-3"],[1,"form-floating"],["type","text","name","name","id","name","placeholder","Product Name",1,"form-control",3,"ngModelChange","ngModel"],["for","name"],[1,"bi","bi-box-seam","me-2"],["type","text","name","category","id","category","placeholder","Category",1,"form-control",3,"ngModelChange","ngModel"],["for","category"],[1,"bi","bi-tags","me-2"],["type","text","name","location","id","location","placeholder","Location",1,"form-control",3,"ngModelChange","ngModel"],["for","location"],[1,"bi","bi-geo-alt","me-2"],["name","availability","id","availability",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value"],["for","availability"],[1,"bi","bi-check-circle","me-2"],["type","number","name","minPrice","id","minPrice","placeholder","Min Price",1,"form-control",3,"ngModelChange","ngModel"],["for","minPrice"],[1,"bi","bi-cash-coin","me-2"],["type","number","name","maxPrice","id","maxPrice","placeholder","Max Price",1,"form-control",3,"ngModelChange","ngModel"],["for","maxPrice"],[1,"bi","bi-cash-stack","me-2"],[1,"col-md-3","d-grid"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"bi","bi-search","me-2"],["type","button",1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"bi","bi-arrow-counterclockwise","me-2"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-truncate",3,"title"],[1,"card-text","text-muted","small"],[1,"mb-2"],[1,"badge","bg-primary"],[1,"list-group","list-group-flush","mb-2","small"],[1,"list-group-item","px-0","py-1"],[1,"mt-auto","d-grid","gap-2"]],template:function(e,l){e&1&&w(0,Z,4,0,"div",0)(1,$,53,15,"div",1)(2,ee,3,0,"div",2)(3,ie,55,10,"div",1),e&2&&(g("ngIf",l.loading),o(),g("ngIf",!l.loading&&l.selectedproduct),o(),g("ngIf",!l.loading&&!l.selectedproduct&&l.products.length===0),o(),g("ngIf",!l.loading&&!l.selectedproduct&&l.products.length>0))},dependencies:[L,B,O,D,T,K,G,Q,J,W,q,H,j,R,z,U],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:10px;margin-top:60px}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:120px;height:auto;margin-bottom:8px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:5px;margin-top:10px;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border:none;border-radius:5px;cursor:pointer;background-color:#79f208;color:#fff;flex:1}button[_ngcontent-%COMP%]:hover{background-color:#24b300}.card-text[_ngcontent-%COMP%]{font-size:.85rem}.btn[_ngcontent-%COMP%]{font-size:.8rem}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0003;transform:scale(1.02);transition:all .3s ease}.product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:8px}.product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.3);border-radius:1.25rem;transition:all .3s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 24px #0003}"]})};export{Y as ProductinventoryComponent};
