import{a as w,b as H,c as T,g as u}from"./chunk-ERQ4UZ3V.js";import{Db as M,Fa as s,Fb as O,Ja as h,Oa as I,R as v,Sa as g,W as d,Za as f,ab as o,ac as D,bb as r,bc as S,cb as l,dc as N,fc as A,hc as C,ob as n,pb as y,q as p,qb as m,u as b,ua as x}from"./chunk-N22TG3ZT.js";var c=class i{constructor(t,e){this.http=t;this.platformId=e}getallmessage=u.APIUrl+"Message/GetAllMessage";getuserrole=u.APIUrl+"Message/GetUserRole";getAuthHeaders(){if(C(this.platformId)){let t=localStorage.getItem("auth_token");return new w({Authorization:`Bearer ${t}`})}return null}GettAllMessage(t){let e=this.getAuthHeaders(),a=new H().set("buyerid",t.toString());return e?this.http.get(this.getallmessage,{params:a,headers:e}).pipe(b(P=>P.data)):p([])}GetUserRole(){let t=this.getAuthHeaders();return t?this.http.get(this.getuserrole,{headers:t}):p()}static \u0275fac=function(e){return new(e||i)(d(T),d(x))};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};function j(i,t){i&1&&(o(0,"div",3),l(1,"i",4),o(2,"p",5),n(3,"No notifications found."),r()())}function F(i,t){if(i&1&&(o(0,"div",6)(1,"div",7),l(2,"i",8),o(3,"h5",9),n(4),r()(),o(5,"p",10),n(6),r(),o(7,"div",11)(8,"p"),l(9,"i",12),n(10," Product ID: "),o(11,"strong"),n(12),r()(),o(13,"p"),l(14,"i",13),n(15),M(16,"date"),r()(),o(17,"div",14)(18,"button",15),l(19,"i",16),n(20," Mark as Read "),r()()()),i&2){let e=t.$implicit;s(4),m("",e.type," In Your Area"),s(2),m(" ",e.message," "),s(6),y(e.productId),s(3),m(" ",O(16,4,e.createdAt,"medium"),"")}}var E=class i{constructor(t){this.notificationservice=t}messages=[];ngOnInit(){this.notificationservice.GetUserRole().subscribe({next:t=>{let e=t.data;console.log("User Role:",e);let a=e.roleid;this.getMessages(a)},error:t=>{console.error("Error fetching user role:",t)}})}getMessages(t){this.notificationservice.GettAllMessage(t).subscribe({next:e=>{this.messages=e,console.log("Notifications:",this.messages)},error:e=>{console.error("Error fetching notifications:",e)}})}static \u0275fac=function(e){return new(e||i)(h(c))};static \u0275cmp=I({type:i,selectors:[["app-notification"]],decls:3,vars:2,consts:[["class","text-center py-10 text-gray-500",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","p-4"],["class","rounded-2xl bg-white shadow-lg border-l-4 border-blue-500 p-4 hover:shadow-xl transition-all duration-300",4,"ngFor","ngForOf"],[1,"text-center","py-10","text-gray-500"],[1,"bi","bi-inbox","fs-1","text-secondary"],[1,"mt-2","text-lg"],[1,"rounded-2xl","bg-white","shadow-lg","border-l-4","border-blue-500","p-4","hover:shadow-xl","transition-all","duration-300"],[1,"flex","items-center","gap-3","mb-2"],[1,"bi","bi-bell-fill","text-blue-500","text-xl"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-gray-700","mb-2"],[1,"text-xs","text-gray-500"],[1,"bi","bi-box"],[1,"bi","bi-calendar-event"],[1,"mt-3","text-end"],[1,"btn","btn-sm","btn-outline-primary","rounded-pill"],[1,"bi","bi-eye"]],template:function(e,a){e&1&&(g(0,j,4,0,"div",0),o(1,"div",1),g(2,F,21,7,"div",2),r()),e&2&&(f("ngIf",a.messages.length===0),s(2),f("ngForOf",a.messages))},dependencies:[A,D,S,N],encapsulation:2})};export{E as NotificationComponent};
