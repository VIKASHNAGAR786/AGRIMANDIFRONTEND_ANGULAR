import{a as P,b as i,c as b,g as a}from"./chunk-DGXWINA3.js";import{s as h}from"./chunk-N7HDFMCH.js";import{T as n,Y as d,g as u,n as p,q as o,wa as m}from"./chunk-XGDP56UF.js";var g=class s{alertSubject=new p({message:"",type:null});alert$=this.alertSubject.asObservable();showAlert(t,e){return u(this,null,function*(){console.log("\u{1F534} Emitting alert:",{message:t,type:e}),this.alertSubject.next({message:t,type:e}),setTimeout(()=>{console.log("\u{1F7E2} Hiding alert"),this.alertSubject.next({message:"",type:null})},3e3)})}handleBackendResponse(t){t.success?this.showAlert(t.message,"success"):this.showAlert(t.message||"Something went wrong!","error")}static \u0275fac=function(e){return new(e||s)};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};var f=class s{constructor(t,e){this.http=t;this.platformId=e}getFarmerIdUrl=a.APIUrl+"Product/GetFarmerId";apiUrl=a.APIUrl+"Product/Saveproduct";GetAllProductUrl=a.APIUrl+"Product/GetAllProduct";GetProductByIdUrl=a.APIUrl+"Product/GetProductById";GetProductReportPdfUrl=a.APIUrl+"Product/GetProductPdf";GetProductByFarmerIdUrl=a.APIUrl+"Farmer/Getproductbyfarmerid";getAuthHeaders(){if(h(this.platformId)){let t=localStorage.getItem("auth_token");return new P({Authorization:`Bearer ${t}`})}return null}saveproduct(t){let e=this.getAuthHeaders();return e?this.http.post(this.apiUrl,t,{headers:e}):o(null)}getFarmerId(t,e){let r=this.getAuthHeaders();return r?this.http.get(`${this.getFarmerIdUrl}?email=${t}&name=${e}`,{headers:r}):o(null)}GetAllProduct(t){let e=this.getAuthHeaders(),r={};t&&Object.entries(t).forEach(([I,l])=>{l!=null&&(r[I]=l)});let c=new i({fromObject:r});return e?this.http.get(this.GetAllProductUrl,{params:c,headers:e}):o([])}GetProductById(t){let e=this.getAuthHeaders(),r=`${this.GetProductByIdUrl}?productid=${t}`;return e?this.http.get(r,{headers:e}):o(null)}getProductPdf(t){let e=this.getAuthHeaders();return e?this.http.get(`${this.GetProductReportPdfUrl}`,{params:new i().set("productid",t.toString()),responseType:"blob",headers:e}):o(new Blob)}getProductByFarmerId(t,e){let r=this.getAuthHeaders(),c=new i().set("id",t).set("email",e);return r?this.http.get(this.GetProductByFarmerIdUrl,{params:c,headers:r}):o([])}static \u0275fac=function(e){return new(e||s)(d(b),d(m))};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};export{g as a,f as b};
