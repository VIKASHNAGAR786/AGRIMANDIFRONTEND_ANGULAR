import{a as T}from"./chunk-RGFYW7ZW.js";import{i as N,k as F}from"./chunk-JNAY6WLU.js";import{l as P,m as O,o as M,q as A}from"./chunk-OYGA6CXT.js";import{Bb as w,Ga as _,Gb as S,J as C,Ka as r,Mb as B,Ob as I,Pa as x,Qb as k,Ua as D,Za as p,eb as m,ga as f,ha as g,hb as t,ib as i,jb as v,mb as h,pb as b,qb as u,wb as E,xb as n,yb as l,zb as s}from"./chunk-MVPX5WN2.js";var U=()=>[1,2,3];function V(a,o){if(a&1){let e=h();t(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11),v(6,"img",12),t(7,"span",13)(8,"span",14),n(9,"Online"),i()()(),t(10,"h3",15),n(11),i(),t(12,"p",16),n(13),i()()(),t(14,"div",17)(15,"div",18)(16,"h4",19),n(17," \u{1F9FE} Buyer Details "),i(),t(18,"div",20)(19,"div",21)(20,"div",22)(21,"strong"),n(22,"\u{1F4DE} Alternate Contact:"),i(),t(23,"div"),n(24),i()()(),t(25,"div",21)(26,"div",23)(27,"div",24),n(28," \u{1F3E2} "),i(),t(29,"div")(30,"div",25),n(31," Company Type "),i(),t(32,"div",26),n(33),i()()()(),t(34,"div",21)(35,"div",22)(36,"strong"),n(37,"\u{1F9FE} GST Number:"),i(),t(38,"div"),n(39),i()()(),t(40,"div",21)(41,"div",22)(42,"strong"),n(43,"\u{1F9FE} PAN Number:"),i(),t(44,"div"),n(45),i()()(),t(46,"div",21)(47,"div",22)(48,"strong"),n(49,"\u{1F33E} Preferred Crops:"),i(),t(50,"div"),n(51),i()()(),t(52,"div",21)(53,"div",22)(54,"strong"),n(55,"\u{1F4B0} Budget Range (\u20B9):"),i(),t(56,"div"),n(57),i()()(),t(58,"div",21)(59,"div",22)(60,"strong"),n(61,"\u{1F501} Purchase Frequency:"),i(),t(62,"div"),n(63),i()()(),t(64,"div",21)(65,"div",22)(66,"strong"),n(67,"\u{1F4B3} Payment Method:"),i(),t(68,"div"),n(69),i()()(),t(70,"div",21)(71,"div",22)(72,"strong"),n(73,"\u{1F4C5} Last Purchase:"),i(),t(74,"div"),n(75),B(76,"date"),i()()(),t(77,"div",21)(78,"div",22)(79,"strong"),n(80,"\u{1F4E6} Total Orders:"),i(),t(81,"div"),n(82),i()()(),t(83,"div",21)(84,"div",22)(85,"strong"),n(86,"\u{1F4B8} Total Spent (\u20B9):"),i(),t(87,"div"),n(88),i()()(),t(89,"div",21)(90,"div",22)(91,"strong"),n(92,"\u{1F381} Loyalty Points:"),i(),t(93,"div"),n(94),i()()(),t(95,"div",21)(96,"div",22)(97,"strong"),n(98,"\u2B50 Buyer Rating:"),i(),t(99,"div"),n(100),i()()()(),t(101,"div",27)(102,"button",28),b("click",function(){f(e);let c=u();return g(c.contactBuyer(c.selectedbuyer))}),n(103," \u{1F4DE} Contact Buyer "),i(),t(104,"button",29),b("click",function(){f(e);let c=u();return g(c.goBackToList())}),n(105," \u2B05\uFE0F Back to All Buyers "),i()()()()()()()}if(a&2){let e=u();r(6),m("src",e.selectedbuyer.profileImageUrl||"https://via.placeholder.com/150",_)("alt",e.selectedbuyer.companyName||"Buyer Profile"),r(5),s(" ",e.selectedbuyer.companyName||"Unknown Company"," "),r(2),s(" ",e.selectedbuyer.address||"N/A"," "),r(11),l(e.selectedbuyer.alternateContact||"N/A"),r(9),s(" ",e.selectedbuyer.companyType||"N/A"," "),r(6),l(e.selectedbuyer.gstNumber||"N/A"),r(6),l(e.selectedbuyer.panNumber||"N/A"),r(6),l(e.selectedbuyer.preferredCrops||"N/A"),r(6),s("\u20B9",e.selectedbuyer.budgetRange||"0",""),r(6),l(e.selectedbuyer.purchaseFrequency||"N/A"),r(6),l(e.selectedbuyer.preferredPaymentMethod||"N/A"),r(6),l(I(76,17,e.selectedbuyer.lastPurchaseDate,"mediumDate")),r(7),l(e.selectedbuyer.totalOrders||0),r(6),s("\u20B9",e.selectedbuyer.totalSpent||0,""),r(6),l(e.selectedbuyer.loyaltyPoints||0),r(6),l(e.selectedbuyer.buyerRating||"N/A")}}function j(a,o){a&1&&(t(0,"div",32)(1,"div",33),v(2,"div",34)(3,"div",35)(4,"div",36),i()())}function z(a,o){a&1&&(t(0,"div",30),p(1,j,5,0,"div",31),i()),a&2&&(r(),m("ngForOf",S(1,U)))}function L(a,o){if(a&1){let e=h();t(0,"div",30)(1,"div",32)(2,"div",39)(3,"div",40),v(4,"img",41),t(5,"div",42)(6,"h5",43),n(7),t(8,"span",44),n(9),i()(),t(10,"p",45),n(11,"\u{1F4DE} "),t(12,"strong"),n(13,"Contact:"),i(),n(14),i(),t(15,"p",45),n(16,"\u{1F4CD} "),t(17,"strong"),n(18,"Location:"),i(),n(19),i(),t(20,"p",46),n(21,"\u{1F4E6} "),t(22,"strong"),n(23,"Total Orders:"),i(),n(24),i(),t(25,"button",47),b("click",function(){let c=f(e).$implicit,y=u(3);return g(y.contactBuyer(c))}),n(26,"Contact Buyer"),i(),t(27,"button",47),b("click",function(){let c=f(e).$implicit,y=u(3);return g(y.viewDetails(c))}),n(28,"See Profile"),i()()()()()()}if(a&2){let e=o.$implicit;r(4),m("src",e.profileImageUrl||"assets/default-profile.png",_),r(3),s(" ",e.companyName||"Unknown Company"," "),r(2),s("Rating: ",e.buyerRating||"No Rating",""),r(5),s(" ",e.contactNumber||"N/A",""),r(5),w(" ",e.city||"N/A",", ",e.state||"N/A",", ",e.country||"N/A",""),r(5),s(" ",e.totalOrders||0,"")}}function G(a,o){if(a&1&&(t(0,"div"),p(1,L,29,8,"div",38),i()),a&2){let e=u(2);r(),m("ngForOf",e.buyers)}}function $(a,o){a&1&&(t(0,"div",48)(1,"div",49)(2,"p",50),n(3," \u{1F512} Kindly "),t(4,"span",51),n(5,"log in"),i(),n(6," to unveil the marketplace magic! "),i(),t(7,"p",52),n(8," Only the worthy may pass beyond this gate... "),i()()())}function q(a,o){if(a&1&&(t(0,"div")(1,"div"),p(2,G,2,1,"div",37)(3,$,9,0,"ng-template",null,0,k),i()()),a&2){let e=E(4),d=u();r(2),m("ngIf",((d.buyers==null?null:d.buyers.length)||0)!==0)("ngIfElse",e)}}var R=class a{constructor(o,e,d){this.userserivice=o;this.router=e;this.route=d}buyers=[];loading=!0;selectedbuyer=null;ngOnInit(){this.checkAndLoadData()}checkAndLoadData(){this.route.params.subscribe(o=>{let e=o.buyerid;e?this.loadallbuyers(()=>{this.loadbuyerdetails(+e)}):this.loadallbuyers()})}loadbuyerdetails(o){this.loading=!0,this.userserivice.GetBuyerById(o).subscribe({next:e=>{if(this.loading=!1,e){let d=this.buyers.find(c=>c.buyerId===o);d&&d.profileImageUrl&&(e.profileImageUrl=d.profileImageUrl,console.log("\u2705 Profile image assigned from buyers array:",d.profileImageUrl))}this.selectedbuyer=e||null,this.buyers=[],console.log("Selected Buyer:",this.selectedbuyer)},error:e=>{this.loading=!1,this.selectedbuyer=null,console.error("\u274C Error loading product details:",e)}})}loadallbuyers(o){this.loading=!0,this.userserivice.GetAllBuyers().pipe(C(()=>{this.loading=!1})).subscribe({next:e=>{this.buyers=e,console.log("\u2705 All buyers loaded:",this.buyers),o&&o()},error:e=>{console.error("\u274C Error loading buyers:",e)}})}viewDetails(o){this.router.navigate(["/buyer",o.buyerId])}goBackToList(){this.router.navigate(["/buyer"])}contactBuyer(o){console.log("\u{1F4DE} Contacting farmer for:",o)}static \u0275fac=function(e){return new(e||a)(x(T),x(F),x(N))};static \u0275cmp=D({type:a,selectors:[["app-buyer"]],decls:6,vars:3,consts:[["noBuyer",""],["class","container mt-5",4,"ngIf"],[1,"container","my-5"],[1,"text-center"],["class","row mb-4",4,"ngIf"],[4,"ngIf"],[1,"container","mt-5"],[1,"card","shadow-lg"],[1,"row","g-0"],[1,"col-md-4","text-center","p-4","bg-light","rounded-start","border-end"],[1,"d-flex","flex-column","align-items-center"],[1,"position-relative"],[1,"img-fluid","rounded-circle","border","border-3","shadow",2,"width","150px","height","150px","object-fit","cover",3,"src","alt"],["title","Active Buyer",1,"position-absolute","top-0","start-100","translate-middle","p-1","bg-success","border","border-light","rounded-circle"],[1,"visually-hidden"],[1,"mt-3","fw-semibold","text-dark"],[1,"text-secondary","small"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","mb-4","text-primary","fw-bold","border-bottom","pb-2"],[1,"row","row-cols-1","row-cols-md-2","g-3"],[1,"col"],[1,"info-item"],[1,"info-item","d-flex","align-items-center","gap-3","p-3","bg-gradient","border-0","rounded-3","shadow-sm","h-100",2,"background","linear-gradient(135deg, #f0f4ff, #ffffff)","transition","transform 0.3s ease"],[1,"icon-box","d-flex","align-items-center","justify-content-center","bg-primary","text-white","rounded-circle",2,"width","40px","height","40px"],[1,"label","text-uppercase","text-secondary","small","fw-semibold","letter-spacing"],[1,"value","fs-6","fw-bold","text-dark"],[1,"d-flex","justify-content-end","gap-3","mt-4"],[1,"btn","btn-success","shadow-sm","px-4",3,"click"],[1,"btn","btn-outline-primary","shadow-sm","px-4",3,"click"],[1,"row","mb-4"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"card","buyer-card","p-3","shadow-sm","shimmer-card"],[1,"shimmer-line","mb-2"],[1,"shimmer-line","w-75","mb-2"],[1,"shimmer-line","w-50"],[4,"ngIf","ngIfElse"],["class","row mb-4",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000",1,"card","buyer-card","p-3","shadow-sm"],[1,"card-body","d-flex","align-items-center"],["alt","Buyer Profile",1,"rounded-circle","me-4","buyer-profile",3,"src"],[1,"flex-grow-1"],[1,"card-title","mb-2"],[1,"badge"],[1,"card-text","mb-1"],[1,"card-text","mb-0"],[1,"btn","btn-custom","mt-3",3,"click"],[1,"tw"],[1,"flex","flex-col","items-center","justify-center","py-10","px-4","bg-gradient-to-r","from-indigo-900","via-purple-800","to-indigo-900","rounded-xl","shadow-2xl","animate-fade-in"],[1,"text-xl","font-semibold","text-white","tracking-wide"],[1,"text-yellow-300"],[1,"text-sm","text-purple-200","mt-2","italic"]],template:function(e,d){e&1&&(p(0,V,106,20,"div",1),t(1,"main",2)(2,"h2",3),n(3,"\u{1F31F} Buyer Details \u{1F31F}"),i(),p(4,z,2,2,"div",4)(5,q,5,2,"div",5),i()),e&2&&(m("ngIf",!d.loading&&d.selectedbuyer),r(4),m("ngIf",d.loading),r(),m("ngIf",!d.loading&&!d.selectedbuyer))},dependencies:[A,P,O,M],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;border:2px solid #ddd}h2[_ngcontent-%COMP%]{font-weight:600}body[_ngcontent-%COMP%]{padding-top:80px;background:linear-gradient(135deg,#e0f7fa,#f8bbd0);min-height:100vh;font-family:Poppins,sans-serif}.navbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1050}.buyer-card[_ngcontent-%COMP%]{background:#ffffff40;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.18);border-radius:1.5rem;box-shadow:0 8px 32px #1f26875e;transition:all .4s ease}.buyer-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 40px #1f268780}.buyer-profile[_ngcontent-%COMP%]{width:90px;height:90px;object-fit:cover;border:3px solid #ffffff;box-shadow:0 0 10px #0003}.btn-custom[_ngcontent-%COMP%]{background:#6a11cb;background:linear-gradient(to right,#2575fc,#6a11cb);color:#fff;border-radius:30px;font-weight:700;transition:.3s}.btn-custom[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#6a11cb,#2575fc);transform:scale(1.05)}h2[_ngcontent-%COMP%]{font-weight:700;color:#333;margin-bottom:2rem}.badge[_ngcontent-%COMP%]{background:#6a11cb;background:linear-gradient(to right,#2575fc,#6a11cb);font-size:.75rem;padding:5px 10px;border-radius:12px;color:#fff;margin-left:5px}@media (max-width: 768px){.card-body.d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:1rem}}.shimmer-card[_ngcontent-%COMP%]{background:#ffffff40;border-radius:1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 32px #1f26875e;overflow:hidden}.shimmer-line[_ngcontent-%COMP%]{height:12px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:6px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.w-75[_ngcontent-%COMP%]{width:75%}.w-50[_ngcontent-%COMP%]{width:50%}.info-item[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px 15px;border-radius:8px;border:1px solid #dee2e6;font-size:.95rem;box-shadow:0 1px 3px #00000008;transition:box-shadow .2s ease}.info-item[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:10px}.info-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #0000000f}"]})};export{R as BuyerComponent};
