import{a as i}from"./chunk-QUGTJ5DF.js";import{a as f,b as c,c as P,p as g}from"./chunk-2RPCDH6B.js";import{s as h}from"./chunk-5OO754BD.js";import{V as n,_ as a,i as u,p,s,za as m}from"./chunk-SR3MDXF7.js";var b=class o{alertSubject=new p({message:"",type:null});alert$=this.alertSubject.asObservable();showAlert(t,e){return u(this,null,function*(){console.log("\u{1F534} Emitting alert:",{message:t,type:e}),this.alertSubject.next({message:t,type:e}),setTimeout(()=>{console.log("\u{1F7E2} Hiding alert"),this.alertSubject.next({message:"",type:null})},3e3)})}handleBackendResponse(t){t.success?this.showAlert(t.message,"success"):this.showAlert(t.message||"Something went wrong!","error")}static \u0275fac=function(e){return new(e||o)};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};var I=class o{constructor(t,e,r){this.http=t;this.platformId=e;this.userInfo=r}getFarmerIdUrl=i.APIUrl+"Product/GetFarmerId";apiUrl=i.APIUrl+"Product/Saveproduct";GetAllProductUrl=i.APIUrl+"Product/GetAllProduct";GetProductByIdUrl=i.APIUrl+"Product/GetProductById";GetProductReportPdfUrl=i.APIUrl+"Product/GetProductPdf";GetProductByFarmerIdUrl=i.APIUrl+"Farmer/Getproductbyfarmerid";getAuthHeaders(){if(h(this.platformId)){let t=this.userInfo.getToken();return new f({Authorization:`Bearer ${t}`})}return null}saveproduct(t){let e=this.getAuthHeaders();return e?this.http.post(this.apiUrl,t,{headers:e}):s(null)}getFarmerId(t,e){let r=this.getAuthHeaders();return r?this.http.get(`${this.getFarmerIdUrl}?email=${t}&name=${e}`,{headers:r}):s(null)}GetAllProduct(t){let e=this.getAuthHeaders(),r={};t&&Object.entries(t).forEach(([y,d])=>{d!=null&&(r[y]=d)});let l=new c({fromObject:r});return e?this.http.get(this.GetAllProductUrl,{params:l,headers:e}):s([])}GetProductById(t){let e=this.getAuthHeaders(),r=`${this.GetProductByIdUrl}?productid=${t}`;return e?this.http.get(r,{headers:e}):s(null)}getProductPdf(t){let e=this.getAuthHeaders();return e?this.http.get(`${this.GetProductReportPdfUrl}`,{params:new c().set("productid",t.toString()),responseType:"blob",headers:e}):s(new Blob)}getProductByFarmerId(t,e){let r=this.getAuthHeaders(),l=new c().set("id",t).set("email",e);return r?this.http.get(this.GetProductByFarmerIdUrl,{params:l,headers:r}):s([])}static \u0275fac=function(e){return new(e||o)(a(P),a(m),a(g))};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};export{b as a,I as b};
